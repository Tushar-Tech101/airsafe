<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Sign Up – Air Pollution Tracker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .tab-button {
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            border-radius: 12px;
            transition: all 0.3s;
            background: #f8fafc;
        }

        .tab-button.active {
            background: linear-gradient(to right, #3b82f6, #2563eb);
            color: white;
            box-shadow: 0 4px 15px rgba(59, 130, 235, 0.4);
        }

        .tab-button:hover:not(.active) {
            background: #dbeafe;
            color: #2563eb;
        }
    </style>
</head>

<body class="min-h-screen bg-gray-50">

    <!-- Header -->
    <header class="bg-gradient-to-r from-blue-600 to-blue-800 text-white shadow-xl sticky top-0 z-10">
        <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" />
                </svg>
                <h1 class="text-xl font-bold">Air Pollution Tracker</h1>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <div class="max-w-7xl mx-auto px-4 pt-6 pb-12">
        <div class="flex flex-wrap gap-3 p-3 bg-white rounded-2xl shadow-lg mb-8">
            <button onclick="location.href='index.html'" class="tab-button">Dashboard</button>
            <button onclick="location.href='hot.html'" class="tab-button">Hotspots</button>
            <button onclick="location.href='report.html'" class="tab-button">Report</button>
            <button onclick="location.href='awareness.html'" class="tab-button">Awareness</button>
            <button class="tab-button active">Sign Up</button>

        </div>
    </div>

    <!-- Signup Card -->
    <div class="max-w-md mx-auto bg-white p-8 rounded-2xl shadow-2xl">
        <div class="text-center mb-8">
            <div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg class="w-12 h-12 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
            </div>
            <h2 class="text-2xl font-bold">Create Your Account</h2>
            <p class="text-sm text-blue-600 mt-2">Join us to track AQI & stay healthy</p>
        </div>

        <form id="signup-form" class="space-y-5">
            <div>
                <label class="block text-sm font-medium mb-1">Full Name</label>
                <input type="text" id="signup-name" placeholder="e.g. Rohan Sharma"
                    class="input-field w-full border rounded-lg px-3 py-2" required>
            </div>

            <div>
                <label class="block text-sm font-medium mb-1">Gender</label>
                <select id="signup-gender" class="input-field w-full border rounded-lg px-3 py-2" required>
                    <option value="">Select Gender</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="other">Other</option>
                </select>
            </div>

            <div>
                <label class="block text-sm font-medium mb-1">Email Address</label>
                <input type="email" id="signup-email" placeholder="you@example.com"
                    class="input-field w-full border rounded-lg px-3 py-2" required>
            </div>
            <div>
                <label class="block text-sm font-medium mb-1">Phone Number</label>
                <input type="text" id="signup-phone" placeholder="e.g. 9876543210"
                    class="input-field w-full border rounded-lg px-3 py-2" required>
            </div>
            <div>
                <label class="block text-sm font-medium mb-1">Password</label>
                <input type="password" id="signup-password" placeholder="••••••••"
                    class="input-field w-full border rounded-lg px-3 py-2" required>
            </div>

            <button type="submit"
                class="mt-2 w-full py-2 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition">
                Sign Up & Continue
            </button>
        </form>
    </div>

    <footer class="bg-white p-4 text-center text-gray-600 mt-12 shadow-md">
        © 2025 Air Pollution Tracker | Team Novices
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

    <script>
        const SUPABASE_URL = 'https://ugkczklrwgoemotljxmj.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVna2N6a2xyd2dvZW1vdGxqeG1qIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI0MTMzMjEsImV4cCI6MjA3Nzk4OTMyMX0.aVJPkAguOhqTqJR8bQ9guQalO6-y29z6scRTVDwFqEg';
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        emailjs.init("jmWgcHe4TWMR6ez9w");

        const form = document.getElementById('signup-form');
        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            const name = document.getElementById('signup-name').value.trim();
            const gender = document.getElementById('signup-gender').value;
            const email = document.getElementById('signup-email').value.trim();
            const phone = document.getElementById('signup-phone').value.trim();
            const password = document.getElementById('signup-password').value.trim();
            const btn = form.querySelector('button[type="submit"]');

            if (!name || !gender || !email || !password || !phone) {
                alert("Please fill all fields.");
                return;
            }

            btn.disabled = true;
            btn.textContent = "Saving…";

            try {
                // save user in Supabase
                const { error } = await supabase.from('users').insert([{ name, gender, email, phone, password }]);
                if (error) throw error;

                // send welcome email
                await emailjs.send("service_uhpmda4", "template_c3ceeei", { name, email });

                // send SMS through Fast2SMS proxy
                

        btn.textContent = "Success!";
        btn.classList.replace('bg-blue-600', 'bg-green-600');
        alert("Signup complete! Email & SMS sent.");
        setTimeout(() => window.location.href = 'dashboard.html', 1200);

    } catch (err) {
            console.error(err);
            alert("Error: " + err.message);
            btn.disabled = false;
            btn.textContent = "Sign Up & Continue";
        }
  });
    </script>

</body>



</html>
<!-- CHATBOT BUTTON (Same as chat.html) -->
<button id="chatbot-btn"
    class="fixed bottom-6 right-6 bg-gradient-to-r from-blue-600 to-cyan-500 hover:from-blue-700 hover:to-cyan-600 text-white p-4 rounded-full shadow-2xl hover:scale-110 transition-all duration-300 z-50 flex items-center justify-center border-4 border-white">
    <img src="https://cdn-icons-png.flaticon.com/512/4712/4712027.png" alt="Health Bot" class="w-8 h-8 animate-pulse">
</button>

<!-- CHATBOT MODAL (Same as chat.html) -->
<div id="chatbot-modal" class="fixed inset-0 bg-black bg-opacity-70 hidden flex items-center justify-center z-50 p-4">
    <div
        class="bg-white rounded-2xl shadow-2xl w-full max-w-md mx-auto overflow-hidden flex flex-col h-[90vh] max-h-[600px]">
        <div class="bg-gradient-to-r from-blue-600 to-cyan-500 text-white p-4 flex justify-between items-center">
            <h3 class="font-bold text-lg">Health AI Assistant</h3>
            <button onclick="closeModal()" class="text-white hover:text-gray-200 text-2xl">×</button>
        </div>
        <div id="chat-messages" class="flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50"></div>
        <div class="p-3 border-t bg-gray-100">
            <div class="grid grid-cols-2 gap-2 mb-3">
                <button class="text-xs bg-blue-100 text-blue-700 px-3 py-2 rounded-lg font-medium hover:bg-blue-200"
                    onclick="quickAsk('What to do when AQI is 150?')">AQI 150</button>
                <button class="text-xs bg-green-100 text-green-700 px-3 py-2 rounded-lg font-medium hover:bg-green-200"
                    onclick="quickAsk('Precautions for children')">Kids</button>
                <button
                    class="text-xs bg-orange-100 text-orange-700 px-3 py-2 rounded-lg font-medium hover:bg-orange-200"
                    onclick="quickAsk('How to wear N95 mask?')">N95 Mask</button>
                <button
                    class="text-xs bg-purple-100 text-purple-700 px-3 py-2 rounded-lg font-medium hover:bg-purple-200"
                    onclick="quickAsk('How to reduce indoor pollution?')">Indoor Tips</button>
            </div>
            <div class="flex gap-1">
                <input id="user-input" type="text" placeholder="Ask health tips..."
                    class="flex-1 px-3 py-2 border border-gray-300 rounded-l-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                    autocomplete="off">
                <button onclick="sendMessage()"
                    class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-r-lg font-bold text-sm">Send</button>
            </div>
        </div>
    </div>
</div>

<!-- CHATBOT SCRIPT (Same as chat.html) -->
<script>
    const GEMINI_API_KEY = "AIzaSyBVVbAD7NN_gJozwIY783ncQwwR_GDFwnQ"; // Replace with your real key

    document.getElementById('chatbot-btn').onclick = () => {
        document.getElementById('chatbot-modal').classList.remove('hidden');
        if (!document.querySelector('#chat-messages > div')) {
            addBotMsg('Hi! I can help with air pollution health tips, AQI precautions, and safety advice.');
        }
    };

    function closeModal() {
        document.getElementById('chatbot-modal').classList.add('hidden');
    }

    function addMsg(text, type) {
        const chat = document.getElementById('chat-messages');
        const div = document.createElement('div');
        div.className = type === 'user' ? 'text-right' : 'text-left';
        div.innerHTML = `<div class="inline-block max-w-xs p-3 rounded-2xl text-sm ${type === 'user' ? 'bg-blue-600 text-white' : 'bg-white border border-gray-200 text-gray-800'}">${text}</div>`;
        chat.appendChild(div);
        chat.scrollTop = chat.scrollHeight;
    }

    function addBotMsg(text) {
        addMsg(text, 'bot');
    }

    async function sendMessage() {
        const input = document.getElementById('user-input');
        const q = input.value.trim();
        if (!q) return;
        addMsg(q, 'user');
        input.value = '';
        addBotMsg('Thinking...');

        if (GEMINI_API_KEY === "YOUR_GEMINI_API_KEY_HERE") {
            document.querySelector('#chat-messages > div:last-child').remove();
            addBotMsg('Error: Please add your real Gemini API key!');
            return;
        }

        try {
            const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${GEMINI_API_KEY}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    contents: [{
                        parts: [{
                            text: `Answer in clear, short English. Only about air pollution health & precautions: ${q}`
                        }]
                    }]
                })
            });
            if (!res.ok) throw new Error(`API Error: ${res.status}`);
            const data = await res.json();
            const reply = data.candidates[0].content.parts[0].text || 'No response.';
            document.querySelector('#chat-messages > div:last-child').remove();
            addBotMsg(reply);
        } catch (e) {
            document.querySelector('#chat-messages > div:last-child').remove();
            addBotMsg(`Error: ${e.message}`);
        }
    }

    function quickAsk(q) {
        document.getElementById('user-input').value = q;
        sendMessage();
    }

    document.getElementById('user-input').addEventListener('keypress', e => {
        if (e.key === 'Enter') sendMessage();
    });

</script>
